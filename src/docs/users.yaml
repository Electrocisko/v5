components:
  requestBodies:
    loginUser:
      type: object
      properties:
        email:
          type: String
          description: mail
        password: 
          type: String
          description: password
      example:
        email: katebush@correo.com
        password: abc
    newUser:
      type: object
      properties:
        name:
          type: String
          description: the full name of the user
        email:
          type: String
          description: user email, is used as identifier to log in
        password:
          type: String
          description: password of the user
        passwordCheck:
          type: String
          description: compare password to avoid typing errors
        address:
          type: String
          description: Address of the user to make the shipments
        age:
          type: Number
          description: user age
        phoneNumber:
          type: String
          description: user phone number
        imageUrl: 
          type: String
          description: the name of the user image or avatar file
      example:
        name: Kate Bush
        email: katebush@correo.com
        password: abc
        passwordCheck: abc
        address: Horton St 40 London
        age: 63
        phoneNumber: 44 20 7481 0513
        imageUrl: 1668343114260-kate.png"
  schemas:
    User:
      type: object
      properties:
        _id:
          type: ObjectId
          description: An id autogenerated by mongo db atlas
        name: 
          type: String
          description: the full name of the user
        email:
          type: String
          description: user email, is used as identifier to log in
        password:
          type: String
          description: Hashed password of the user.
        address:
          type: String
          description: Address of the user to make the shipments
        age:
          type: Number
          description: user age
        phoneNumber:
          type: String
          description: user phone number
        imageUrl: 
          type: String
          description: the name of the user image or avatar file
        role:
          type: String
          description: the role of the registered person, by default it is user
        cart:
          type: ObjectId
          description: cart id associated with the user
      example:
        _id: ObjectId("6370e54a45084c4937b97402")
        name: Kate Bush
        email: katebush@correo.com
        password: $2b$10$8YVH/l1ClhhnL4nQyWIG6ub1frvZuChw0ggriYwCPq.xRtoa3jyyK
        address: Horton St 40 London
        age: 63
        phoneNumber: 44 20 7481 0513
        imageUrl: 1668343114260-kate.png"
        role: user
        cart: 6370e54a45084c4937b97400
paths:
  /api/users/:
    get:
      summary: get all registered users
      tags:
        - Users
      responses:
        "200":
          description: return status 200 and all data
          content:
            applicaction/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        "400":
          description: nonexistent user or invalid id
        "500":
          description: couldnt get users
  /api/sessions/register:
    post:
      summary: register a new user
      tags:
        - Users
      requestBody:
        requiered: true
        content:
          application/json:
            schema:
              $ref: '#/components/requestBodies/newUser'
      responses:
        "201":
          description: "succes payload: "
        "400":
          description: "user registration error"
        "500":
          description: "couldnt save user"
  /api/sessions/login:
    post:
      summary: log in a new user
      tags:
        - Users
      requestBody:
        requiered: true
        content:
          application/json:
            schema:
              $ref: '#/components/requestBodies/loginUser'
      responses:
        "201":
          description: "200 return user "
        "400":
          description: "user login error"
        "500":
          description: "couldnt login user"

